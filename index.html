<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeTime - èº«å¿ƒå¥åº·è‡ªæˆ‘æª¢æ¸¬</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f7fa;
            --text-color: #333;
            --success-color: #2ecc71;
            --warning-color: #f1c40f;
            --danger-color: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--secondary-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 600px;
            transition: all 0.3s ease;
        }

        h1, h2 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .question-section {
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            text-align: left;
        }

        .option-btn:hover {
            border-color: var(--primary-color);
            background-color: #f0f7ff;
        }

        .option-btn.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #357abd;
        }

        .btn-secondary {
            background-color: #e0e0e0;
            color: #555;
        }

        .btn-secondary:hover {
            background-color: #d0d0d0;
        }

        .btn-secondary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .result-card {
            text-align: center;
            padding: 2rem;
            border-radius: 10px;
            background-color: #f8f9fa;
            margin-top: 1rem;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 1.5rem;
        }

        .category-score {
            margin: 10px 0;
            text-align: left;
        }

        .category-bar-bg {
            background: #ddd;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .category-bar-fill {
            height: 100%;
            border-radius: 4px;
        }

        .suggestion-list {
            text-align: left;
            margin-top: 1.5rem;
        }
        
        .suggestion-item {
            margin-bottom: 0.8rem;
            padding-left: 1.5rem;
            position: relative;
        }

        .suggestion-item::before {
            content: "ğŸ’¡";
            position: absolute;
            left: 0;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<div class="container" id="app">
    <!-- Welcome Screen -->
    <div id="welcome-screen">
        <h1>MeTime å¥åº·æª¢æ¸¬ç«™ ğŸŒ¿</h1>
        <p>é€™æ˜¯ä¸€å€‹ç°¡å–®çš„è‡ªæˆ‘è©•ä¼°å·¥å…·ï¼Œå¹«åŠ©æ‚¨äº†è§£ç›®å‰çš„èº«é«”ç‹€æ³ã€é£²é£Ÿç¿’æ…£èˆ‡ç”Ÿæ´»å‹æ…‹ã€‚</p>
        <p>æ¸¬é©—å¤§ç´„éœ€è¦ 3 åˆ†é˜ï¼Œè«‹æ ¹æ“šæ‚¨æœ€è¿‘ä¸€å€‹æœˆçš„çœŸå¯¦æƒ…æ³å›ç­”ã€‚</p>
        <div style="text-align: center; margin-top: 2rem;">
            <button class="btn-primary" onclick="startQuiz()">é–‹å§‹æ¸¬é©—</button>
        </div>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen" class="hidden">
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>
        <div id="question-container">
            <!-- Question will be injected here -->
        </div>
        <div class="controls">
            <button class="btn-secondary" id="prev-btn" onclick="prevQuestion()" disabled>ä¸Šä¸€é¡Œ</button>
            <button class="btn-primary" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
        </div>
    </div>

    <!-- Result Screen -->
    <div id="result-screen" class="hidden">
        <h2>æ¸¬é©—çµæœåˆ†æ</h2>
        <div class="result-card">
            <div class="score-circle" id="total-score">0</div>
            <h3>æ‚¨çš„å¥åº·æŒ‡æ•¸</h3>
            <p id="overall-feedback"></p>
        </div>

        <div id="category-breakdown" style="margin-top: 2rem;">
            <!-- Category scores will be injected here -->
        </div>

        <div class="suggestion-list" id="suggestions">
            <h3>ğŸŒ± çµ¦æ‚¨çš„å»ºè­°ï¼š</h3>
            <!-- Suggestions will be injected here -->
        </div>

        <div style="text-align: center; margin-top: 2rem;">
            <button class="btn-primary" onclick="restartQuiz()">é‡æ–°æ¸¬é©—</button>
        </div>
    </div>
</div>

<script>
    // Data Structure
    const questions = [
        // Body Condition (0-3)
        {
            id: 1,
            category: 'body',
            text: 'æ‚¨è¦ºå¾—æœ€è¿‘çš„é«”åŠ›ç‹€æ³å¦‚ä½•ï¼Ÿ',
            options: [
                { text: 'ç²¾åŠ›å……æ²›ï¼Œå¾ˆå°‘æ„Ÿåˆ°ç–²å€¦', score: 10 },
                { text: 'å°šå¯ï¼Œå¶çˆ¾ä¸‹åˆæœƒç´¯', score: 7 },
                { text: 'å®¹æ˜“ç–²å€¦ï¼Œæ—©ä¸Šèµ·åºŠå¾ˆç´¯', score: 4 },
                { text: 'æ•´å¤©éƒ½è¦ºå¾—å¾ˆç´¯ï¼Œæä¸èµ·å‹', score: 1 }
            ]
        },
        {
            id: 2,
            category: 'body',
            text: 'æ‚¨çš„ BMI (èº«é«”è³ªé‡æŒ‡æ•¸) ç¯„åœæ˜¯ï¼Ÿ',
            note: '(BMI = é«”é‡kg / èº«é«˜mÂ²)',
            options: [
                { text: '18.5 ~ 24 (æ¨™æº–)', score: 10 },
                { text: '24 ~ 27 (éé‡) æˆ– 17 ~ 18.5 (éè¼•)', score: 7 },
                { text: '27 ä»¥ä¸Š (è‚¥èƒ–) æˆ– 17 ä»¥ä¸‹ (éç˜¦)', score: 4 },
                { text: 'ä¸çŸ¥é“ / æ²’é‡é', score: 5 }
            ]
        },
        {
            id: 3,
            category: 'body',
            text: 'æœ€è¿‘æ˜¯å¦æœ‰ä¸æ˜åŸå› çš„èº«é«”ç–¼ç—›æˆ–ä¸é©ï¼Ÿ',
            options: [
                { text: 'å®Œå…¨æ²’æœ‰', score: 10 },
                { text: 'å¶çˆ¾æœ‰ä¸€é»ï¼Œä½†ä¸å½±éŸ¿ç”Ÿæ´»', score: 7 },
                { text: 'ç¶“å¸¸ç™¼ç”Ÿï¼Œéœ€è¦ä¼‘æ¯', score: 4 },
                { text: 'ä¸€ç›´éƒ½æœ‰ï¼Œåš´é‡å½±éŸ¿ç”Ÿæ´»', score: 1 }
            ]
        },
        
        // Diet Habits (4-7)
        {
            id: 4,
            category: 'diet',
            text: 'æ‚¨æ¯å¤©å–æ°´çš„é‡å¤§ç´„æ˜¯å¤šå°‘ï¼Ÿ',
            options: [
                { text: '2000cc ä»¥ä¸Š', score: 10 },
                { text: '1500cc ~ 2000cc', score: 8 },
                { text: '1000cc ~ 1500cc', score: 5 },
                { text: 'å¾ˆå°‘å–æ°´ï¼Œä¸»è¦å–é£²æ–™', score: 2 }
            ]
        },
        {
            id: 5,
            category: 'diet',
            text: 'æ‚¨æ¯é€±åƒè”¬èœæ°´æœçš„é »ç‡ï¼Ÿ',
            options: [
                { text: 'å¤©å¤©éƒ½åƒï¼Œä¸”ä»½é‡è¶³å¤ ', score: 10 },
                { text: 'å¤©å¤©åƒï¼Œä½†ä»½é‡ä¸å¤š', score: 7 },
                { text: 'ä¸€é€±åƒ 3-4 æ¬¡', score: 4 },
                { text: 'å¾ˆå°‘åƒ', score: 1 }
            ]
        },
        {
            id: 6,
            category: 'diet',
            text: 'æ‚¨åƒå®µå¤œæˆ–æ²¹ç‚¸/å«ç³–é£Ÿç‰©çš„é »ç‡ï¼Ÿ',
            options: [
                { text: 'å¹¾ä¹ä¸åƒ', score: 10 },
                { text: 'ä¸€é€± 1-2 æ¬¡', score: 7 },
                { text: 'ä¸€é€± 3-4 æ¬¡', score: 4 },
                { text: 'å¹¾ä¹å¤©å¤©åƒ', score: 1 }
            ]
        },

        // Lifestyle (8-10)
        {
            id: 7,
            category: 'life',
            text: 'æ‚¨å¹³å‡æ¯å¤©çš„ç¡çœ æ™‚é–“ï¼Ÿ',
            options: [
                { text: '7-8 å°æ™‚ï¼Œç¡çœ å“è³ªå¥½', score: 10 },
                { text: '6-7 å°æ™‚ï¼Œå¶çˆ¾å¤±çœ ', score: 7 },
                { text: 'å°‘æ–¼ 6 å°æ™‚æˆ–å¤šæ–¼ 9 å°æ™‚', score: 4 },
                { text: 'ç¡çœ å¾ˆä¸è¦å¾‹ï¼Œå“è³ªå¾ˆå·®', score: 1 }
            ]
        },
        {
            id: 8,
            category: 'life',
            text: 'æ‚¨æœ‰è¦å¾‹é‹å‹•çš„ç¿’æ…£å—ï¼Ÿ',
            options: [
                { text: 'æ¯é€± 3 æ¬¡ä»¥ä¸Šï¼Œæ¯æ¬¡ 30 åˆ†é˜ä»¥ä¸Š', score: 10 },
                { text: 'æ¯é€± 1-2 æ¬¡', score: 7 },
                { text: 'å¶çˆ¾å‹•ä¸€ä¸‹', score: 4 },
                { text: 'å¹¾ä¹ä¸é‹å‹•', score: 1 }
            ]
        },
        {
            id: 9,
            category: 'life',
            text: 'æ‚¨è¦ºå¾—ç›®å‰çš„å£“åŠ›æŒ‡æ•¸å¦‚ä½•ï¼Ÿ',
            options: [
                { text: 'å¿ƒæƒ…æ”¾é¬†ï¼Œæ²’ä»€éº¼å£“åŠ›', score: 10 },
                { text: 'æœ‰é»å£“åŠ›ï¼Œä½†èƒ½è‡ªæˆ‘èª¿ç¯€', score: 7 },
                { text: 'å£“åŠ›å¾ˆå¤§ï¼Œæ„Ÿåˆ°ç„¦æ…®', score: 4 },
                { text: 'å¿«å´©æ½°äº†ï¼Œç„¡æ³•è² è·', score: 1 }
            ]
        },
        {
            id: 10,
            category: 'life',
            text: 'æ‚¨æ¯å¤©ä½¿ç”¨3Cç”¢å“ï¼ˆæ‰‹æ©Ÿã€é›»è…¦ï¼‰çš„éå·¥ä½œæ™‚é–“ï¼Ÿ',
            options: [
                { text: '1 å°æ™‚ä»¥å…§', score: 10 },
                { text: '1-3 å°æ™‚', score: 7 },
                { text: '3-5 å°æ™‚', score: 4 },
                { text: 'å¹¾ä¹éƒ½åœ¨æ»‘æ‰‹æ©Ÿ', score: 1 }
            ]
        }
    ];

    // State
    let currentQuestionIndex = 0;
    let answers = new Array(questions.length).fill(null);

    // DOM Elements
    const app = document.getElementById('app');
    const welcomeScreen = document.getElementById('welcome-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultScreen = document.getElementById('result-screen');
    const questionContainer = document.getElementById('question-container');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const progressBar = document.getElementById('progress');

    // Functions
    function startQuiz() {
        welcomeScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        renderQuestion();
    }

    function renderQuestion() {
        const question = questions[currentQuestionIndex];
        
        // Update Progress
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;

        // Render Question HTML
        let html = `
            <div class="question-section">
                <div class="question-text">${currentQuestionIndex + 1}. ${question.text}</div>
                ${question.note ? `<div style="font-size:0.9rem; color:#666; margin-bottom:10px;">${question.note}</div>` : ''}
                <div class="options">
        `;

        question.options.forEach((option, index) => {
            const isSelected = answers[currentQuestionIndex] === option.score;
            html += `
                <button class="option-btn ${isSelected ? 'selected' : ''}" 
                    onclick="selectOption(${option.score}, this)">
                    ${option.text}
                </button>
            `;
        });

        html += `</div></div>`;
        questionContainer.innerHTML = html;

        // Button State
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.disabled = answers[currentQuestionIndex] === null;
        nextBtn.innerText = currentQuestionIndex === questions.length - 1 ? 'æŸ¥çœ‹çµæœ' : 'ä¸‹ä¸€é¡Œ';
    }

    function selectOption(score, btnElement) {
        answers[currentQuestionIndex] = score;
        
        // Visual update
        const buttons = document.querySelectorAll('.option-btn');
        buttons.forEach(btn => btn.classList.remove('selected'));
        btnElement.classList.add('selected');

        // Enable next button
        nextBtn.disabled = false;
        
        // Auto advance after short delay (optional, keeping manual for now)
    }

    function prevQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            renderQuestion();
        }
    }

    function nextQuestion() {
        if (answers[currentQuestionIndex] === null) return;

        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            renderQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        quizScreen.classList.add('hidden');
        resultScreen.classList.remove('hidden');

        // Calculate Scores
        const totalScore = answers.reduce((a, b) => a + b, 0);
        const maxScore = questions.length * 10; // Assuming max score per question is 10
        const percentage = Math.round((totalScore / maxScore) * 100);

        // Category Scores
        const categories = {
            body: { score: 0, max: 0, name: 'èº«é«”ç‹€æ³' },
            diet: { score: 0, max: 0, name: 'é£²é£Ÿç¿’æ…£' },
            life: { score: 0, max: 0, name: 'ç”Ÿæ´»å‹æ…‹' }
        };

        questions.forEach((q, index) => {
            categories[q.category].score += answers[index];
            categories[q.category].max += 10; // Assuming max is 10
        });

        // Update UI
        document.getElementById('total-score').innerText = percentage;
        
        // Overall Feedback
        const feedbackEl = document.getElementById('overall-feedback');
        if (percentage >= 85) {
            feedbackEl.innerText = "å¤ªæ£’äº†ï¼æ‚¨çš„èº«å¿ƒç‹€æ³ç¶­æŒå¾—éå¸¸å¥½ï¼Œè«‹ç¹¼çºŒä¿æŒï¼ğŸŒŸ";
            feedbackEl.style.color = "var(--success-color)";
        } else if (percentage >= 70) {
            feedbackEl.innerText = "é‚„ä¸éŒ¯å–”ï¼å¤§éƒ¨åˆ†ç¿’æ…£éƒ½å¾ˆå¥åº·ï¼Œåªæœ‰å°éƒ¨åˆ†éœ€è¦å¾®èª¿ã€‚ğŸ’ª";
            feedbackEl.style.color = "var(--primary-color)";
        } else if (percentage >= 50) {
            feedbackEl.innerText = "ä¸€èˆ¬èˆ¬ã€‚æœ‰äº›ç”Ÿæ´»ç¿’æ…£å¯èƒ½æ­£åœ¨æ‚„æ‚„å½±éŸ¿æ‚¨çš„å¥åº·ï¼Œå»ºè­°å¤šåŠ ç•™æ„ã€‚âš ï¸";
            feedbackEl.style.color = "var(--warning-color)";
        } else {
            feedbackEl.innerText = "è­¦è¨Šï¼æ‚¨çš„ç”Ÿæ´»å‹æ…‹å¯èƒ½å°å¥åº·é€ æˆè² æ“”ï¼Œå»ºè­°ç«‹å³é–‹å§‹èª¿æ•´ã€‚ğŸš¨";
            feedbackEl.style.color = "var(--danger-color)";
        }

        // Category Bars
        const catContainer = document.getElementById('category-breakdown');
        let catHtml = '';
        const suggestions = [];

        for (const key in categories) {
            const cat = categories[key];
            const catPercent = Math.round((cat.score / cat.max) * 100);
            let color = '#2ecc71';
            if (catPercent < 60) color = '#e74c3c';
            else if (catPercent < 80) color = '#f1c40f';

            catHtml += `
                <div class="category-score">
                    <div style="display:flex; justify-content:space-between;">
                        <span>${cat.name}</span>
                        <span>${catPercent}%</span>
                    </div>
                    <div class="category-bar-bg">
                        <div class="category-bar-fill" style="width: ${catPercent}%; background-color: ${color};"></div>
                    </div>
                </div>
            `;

            // Generate Suggestions
            if (catPercent < 70) {
                if (key === 'body') suggestions.push('å»ºè­°å®‰æ’æ™‚é–“æ‰¾æˆ‘å¹«ä½ é€²è¡Œä¸€å€‹è©³ç´°å¥åº·è©•ä¼°ï¼Œä¸¦ç•™æ„èº«é«”ç™¼å‡ºçš„è­¦è¨Šã€‚');
                if (key === 'diet') suggestions.push('å˜—è©¦å¤šå–æ°´ï¼Œæ¸›å°‘å«ç³–é£²æ–™ï¼Œä¸¦å¢åŠ è”¬æœæ”å–é‡ã€‚');
                if (key === 'life') suggestions.push('è©¦è‘—æ‰¾æ™‚é–“é‹å‹•ï¼Œä¸¦å»ºç«‹è¦å¾‹çš„ç¡çœ ç¿’æ…£ï¼Œç¡å‰æ¸›å°‘ä½¿ç”¨æ‰‹æ©Ÿã€‚');
            }
        }
        catContainer.innerHTML = catHtml;

        // Render Suggestions
        const suggEl = document.getElementById('suggestions');
        if (suggestions.length > 0) {
            suggEl.innerHTML = '<h3>ğŸŒ± çµ¦æ‚¨çš„å»ºè­°ï¼š</h3>' + suggestions.map(s => `<div class="suggestion-item">${s}</div>`).join('');
            suggEl.classList.remove('hidden');
        } else {
            suggEl.innerHTML = '<h3>ğŸŒ± çµ¦æ‚¨çš„å»ºè­°ï¼š</h3><div class="suggestion-item">æ‚¨åšå¾—å¾ˆå¥½ï¼ç¹¼çºŒä¿æŒç›®å‰çš„ç”Ÿæ´»æ–¹å¼å³å¯ã€‚</div>';
        }
    }

    function restartQuiz() {
        currentQuestionIndex = 0;
        answers = new Array(questions.length).fill(null);
        resultScreen.classList.add('hidden');
        welcomeScreen.classList.remove('hidden');
    }
</script>

</body>
</html>
